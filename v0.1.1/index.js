!function e(t,n,i){function r(o,a){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return r(n?n:e)},l,l.exports,e,t,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function s(){i(this,s)};n["default"]=r,r.EMPTY=0,r.SNAKE=1,r.FRUIT=2},{}],2:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function s(){i(this,s)};n["default"]=r,r.LEFT=1,r.UP=2,r.RIGHT=3,r.DOWN=4},{}],3:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(t,n){i(this,e),this.grid=t,this.snake=n,this.init()}return r(e,[{key:"init",value:function(){this.initLevels(),this.score=0,this.level=this.levels.shift(),this.grid.init(),this.snake.init(),this.grid.spawnFruit(),this.grid.markSnakeAt(this.snake.head)}},{key:"update",value:function(){var e=this.snake.calculateNextPosition();return this.grid.detectCollision(e)?this.handleCollision():this.moveSnakeTo(e),this}},{key:"moveSnakeTo",value:function(e){this.grid.hasFruitAt(e)?this.handleScore():this.grid.clearCell(this.snake.pullTail()),this.snake.advanceTo(e),this.grid.markSnakeAt(this.snake.head)}},{key:"handleCollision",value:function(){this.init()}},{key:"handleScore",value:function(){this.grid.spawnFruit(),this.score+=this.level.score,this.score>=this.level.up&&(this.level=this.levels.shift())}},{key:"initLevels",value:function(){this.levels=[{ID:1,speed:10,score:50,up:200},{ID:2,speed:9,score:75,up:500},{ID:3,speed:8,score:100,up:1500},{ID:4,speed:7,score:125,up:3e3},{ID:5,speed:6,score:150,up:5e3},{ID:6,speed:5,score:175,up:7e3},{ID:7,speed:4,score:200,up:9e3},{ID:8,speed:3,score:250,up:1e4},{ID:9,speed:2,score:300,up:11e3},{ID:10,speed:1,score:500,up:12e3}]}}]),e}();n["default"]=s},{}],4:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Cell"),a=i(o),u=function(){function e(t){r(this,e),this.dimensions=t,this.init()}return s(e,[{key:"init",value:function(){this.cells=[],this.initRows(),this.initCols()}},{key:"initRows",value:function(){for(var e=0;e<this.dimensions.rows;e+=1)this.cells[e]=[]}},{key:"initCols",value:function(){for(var e=0;e<this.dimensions.rows;e+=1)for(var t=0;t<this.dimensions.cols;t+=1)this.cells[e][t]=0}},{key:"calculateEmptyCells",value:function(){for(var e=[],t=0;t<this.dimensions.rows;t+=1)for(var n=0;n<this.dimensions.cols;n+=1)this.cells[t][n]===a["default"].EMPTY&&e.push({row:t,col:n});return e}},{key:"spawnFruit",value:function(){var e=this.calculateEmptyCells(),t=Math.floor(Math.random()*(e.length-1));this.markFruitAt(e[t])}},{key:"markFruitAt",value:function(e){this.cells[e.row][e.col]=a["default"].FRUIT}},{key:"hasFruitAt",value:function(e){return this.cells[e.row][e.col]===a["default"].FRUIT}},{key:"markSnakeAt",value:function(e){this.cells[e.row][e.col]=a["default"].SNAKE}},{key:"hasSnakeAt",value:function(e){return this.cells[e.row][e.col]===a["default"].SNAKE}},{key:"hasWallAt",value:function(e){return e.row<0||e.row>this.dimensions.rows-1||e.col<0||e.col>this.dimensions.cols-1}},{key:"detectCollision",value:function(e){return this.hasWallAt(e)||this.hasSnakeAt(e)}},{key:"clearCell",value:function(e){this.cells[e.row][e.col]=a["default"].EMPTY}}]),e}();n["default"]=u},{"./Cell":1}],5:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(t){i(this,e),this.snake=t}return r(e,[{key:"createKeyDownListener",value:function(){var e=37,t=38,n=39,i=40,r=function(r){switch(r.keyCode){case e:this.snake.turnLeft();break;case t:this.snake.turnUp();break;case n:this.snake.turnRight();break;case i:this.snake.turnDown()}};return r.bind(this)}}]),e}();n["default"]=s},{}],6:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Cell"),a=i(o),u=function(){function e(t,n){r(this,e),this.canvas=t,this.dimensions=n,this.context=t.getContext("2d"),t.width=n.grid.cols*n.cell.width,t.height=n.grid.rows*n.cell.height}return s(e,[{key:"render",value:function(e){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font="15px Monospace",this.context.fillText("SCORE:"+e.score,50,50),this.context.fillText("LEVEL:"+e.level.ID,50,100);for(var t=this.dimensions.cell.width,n=this.dimensions.cell.height,i=0;i<this.dimensions.grid.rows;i+=1)for(var r=0;r<this.dimensions.grid.cols;r+=1)if(e.grid.cells[i][r]!==a["default"].EMPTY){var s=r*t,o=i*n;this.context.beginPath(),this.context.rect(s,o,t,n),this.context.stroke()}}}]),e}();n["default"]=u},{"./Cell":1}],7:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Direction"),a=i(o),u=function(){function e(){r(this,e),this.init()}return s(e,[{key:"init",value:function(e,t){this.turns=[],this.parts=[this.head=e||{row:1,col:1}],this.direction=t||a["default"].RIGHT}},{key:"calculateNextPosition",value:function(){this.updateDirection();var e=this.head,t=e.row,n=e.col;switch(this.direction){case a["default"].LEFT:n-=1;break;case a["default"].UP:t-=1;break;case a["default"].RIGHT:n+=1;break;case a["default"].DOWN:t+=1}return{row:t,col:n}}},{key:"updateDirection",value:function(){this.turns.length>0&&(this.direction=this.turns.shift())}},{key:"advanceTo",value:function(e){this.parts.unshift(this.head=e)}},{key:"pullTail",value:function(){return this.parts.pop()}},{key:"turnLeft",value:function(){this.direction!==a["default"].RIGHT&&this.turns.push(a["default"].LEFT)}},{key:"turnUp",value:function(){this.direction!==a["default"].DOWN&&this.turns.push(a["default"].UP)}},{key:"turnRight",value:function(){this.direction!==a["default"].LEFT&&this.turns.push(a["default"].RIGHT)}},{key:"turnDown",value:function(){this.direction!==a["default"].UP&&this.turns.push(a["default"].DOWN)}}]),e}();n["default"]=u},{"./Direction":2}],8:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=e("./Renderer"),s=i(r),o=e("./Grid"),a=i(o),u=e("./Snake"),l=i(u),c=e("./Game"),f=i(c),h=e("./Input"),d=i(h),v={grid:{rows:20,cols:25},cell:{width:25,height:25}},p=new s["default"](document.createElement("canvas"),v),k=new a["default"](v.grid),y=new l["default"],w=new f["default"](k,y),m=new d["default"](y);document.addEventListener("keydown",m.createKeyDownListener()),document.body.appendChild(p.canvas);var b=0;!function g(){b++,b%w.level.speed===0&&p.render(w.update()),window.requestAnimationFrame(g)}()},{"./Game":3,"./Grid":4,"./Input":5,"./Renderer":6,"./Snake":7}]},{},[8]);